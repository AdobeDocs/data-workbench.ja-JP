---
description: センサーは、データコレクタ、ディスクキュー、データ送信機の3つの主要なコンポーネントで構成されています。
title: 基本コンポーネントとは
uuid: 32e6e8d9-90ee-4db1-8883-dbdf245df26f
translation-type: tm+mt
source-git-commit: aec1f7b14198cdde91f61d490a235022943bfedb

---


# 基本コンポーネントとは{#what-are-basic-components}

センサーは、3つの主要なコンポーネントで構成されます。データコレクタ、ディスクキュー、およびデータ送信機。

![](assets/Visual-Sensor.png)

## データコレクタ {#section-f970eaff30364a3c8106d5ec9c1b5caa}

データコレクタ（コレクタ）は、Webサーバープロセス内で実行されるNSAPI、ISAPI、J2EEフィルターサーブレット、またはApacheモジュールです。

Webサーバーが処理し、その情報をディスクキューに預ける各HTTP要求に関する生のイベントデータを取得します。 同じマシン上でWebサーバーの複数のインスタンスを実行する場合、各インスタンスはコレクタモジュールの独自のインスタンスを読み込みます。ただし、コレクタのすべてのインスタンスは、イベントデータを同じディスクキューに書き込みます。

## ディスクキュー {#section-41aac77ab30e48478d1b31eac288df05}

ディスクキュー（キュー）は、Sensorが収集する生のイベントデータをバッファリングする、耐障害性の高いFIFO（先入れ先出し）メモリマップキューファイルで、インストール先のWebサーバー上で収集されたイベントデータを一時的に保存します。

キューが制約なしに拡張するのを防ぐ（その結果、使用可能なディスク領域がすべて消費される）ため、キューは固定サイズのファイルに保持され、保持可能な容量と同じ量のイベントデータのみが保持されます。 キューファイルのサイズは、Sensorのインストール時に、Sensor設定ファイルtxtlogd.confのQueueSizeパラメーターで設定されます。 txlogd.confパラメーターについて詳しくは、Sensor Txlogd.conf File Parametersを参照してください。

ファイルの物理的な長さは、一度確立されても拡大または縮小されません。 コレクタは新しいイベントデータを単にキューに預け、送信機はそこからイベントを取り込む。 コレクタがファイルの最後に到達すると、キューファイルへの書き込みが停止します。

一般に、送信機は、コレクタがイベントをデポジットするのと同じ速さでキューからイベントをプルします。 ただし、送信機とInsightサーバーの接続が遅いか、使用できない場合は、キューが未送信イベントでいっぱいになる可能性があります。 この場合、コレクタは、送信機がキューをダウンするまでデータの収集を停止する。 この間にWebサーバーが処理する要求に関する情報は、永久に失われます。

**キューサイズの決定**

Sensorをインストールする前に、キューのサイズを決定する必要があります。 恒久的なデータ損失を防ぐために、Insightサーバーへの接続が最も頻繁に停止した場合（つまり、ピークアクティビティの数日間に十分なストレージ）に蓄積される可能性のあるイベントの数に対応できる大きなキューを作成することが重要です。 キューに十分なイベントデータを格納できるように設定する必要があります。これにより、システム管理者は、対象のInsightサーバーに対するネットワークのアクセシビリティを復元したり、データを失わずにInsightサーバーを修復または置き換えたりできます。 Sensorに障害が発生し、有効でアクセス可能なキューファイルにイベントデータを格納できない場合、後続のデータは失われます。

>[!NOTE]
>
>Sensorを実行する各マシンの管理者は、ローカルキューファイルの固有の性質を理解し、削除、アーカイブ、圧縮が可能な通常のログファイルとして扱われないようにすることが重要です。

Sensorがインストールされているサーバーで生成されるイベントデータのピーク日数を10日以上保持するようにキューを設定することをお勧めします。 つまり、昨年の任意のピーク日のイベントデータの量を取り、それに10を掛けます。

この推奨は、次のことを前提としています。

* 貴社の情報技術チームは、本ガイドの「Administering Sensor」で詳しく説明されている方法で各Sensorを監視し、1日に少なくとも1回監視しています。 そうでない場合は、この期間を適切に延長する必要があります。
* 会社の情報技術チームは、ネットワークのアクセシビリティを復元したり、インストール済みのInsightサーバーを72時間以内に交換または修復したりできます。 そうでない場合は、この期間を適切に延長する必要があります。
* Sensorの設定は変わりません。
* 外部イベント（大規模なマーケティングキャンペーンなど）がない場合、Webサーバーによって生成されるイベントデータの量が大幅に増加します。

キューのサイズの選択は、応答時間や週末/祝日のシステム管理に関する会社の慣行とポリシーを考慮して、主に望むシステム監視のレベルに依存します。 キューのサイズが大きいほど、キューのサイズをできる限り大きくすることをお勧めします。

>[!NOTE]
>
>キューファイルのサイズが大きいと、パフォーマンスに影響しません。

キューのサイズ変更に関するその他の推奨事項については、アドビのコンサルティングサービスにお問い合わせください。

## データ送信機 {#section-2dc03d37d73b4cc6bdd5af6b346350d4}

送信機は、Webサーバーと同じマシン上で実行される独立したプロセス（UNIXベースのコンピューター上のデーモンやWindowsコンピューター上のサービスなど）です。

送信機は、ディスクキューからイベントデータを読み取り、圧縮し、HTTP/S経由で指定したInsightサーバーに送信し、そこで処理して **.vsl** ファイルに保存します。
