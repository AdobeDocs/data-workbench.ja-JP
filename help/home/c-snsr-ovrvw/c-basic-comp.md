---
description: センサーは、データコレクター、ディスクキュー、データトランスミッターの 3 つの主要なコンポーネントで構成されています。
title: 基本コンポーネント
uuid: 32e6e8d9-90ee-4db1-8883-dbdf245df26f
exl-id: aee6a601-590a-43e0-aeeb-42a4522e55c8
source-git-commit: b1dda69a606a16dccca30d2a74c7e63dbd27936c
workflow-type: tm+mt
source-wordcount: '806'
ht-degree: 0%

---

# 基本コンポーネント{#what-are-basic-components}

{{eol}}

センサーは、次の 3 つの主要なコンポーネントで構成されます。データコレクター、ディスクキュー、およびデータトランスミッター。

![](assets/Visual-Sensor.png)

## データコレクター {#section-f970eaff30364a3c8106d5ec9c1b5caa}

データコレクター（コレクター）は、Web サーバープロセス内で実行される NSAPI、ISAPI、J2EE フィルターサーブレット、または Apache モジュールです。

Web サーバーが処理する各 HTTP リクエストに関する生のイベントデータを取得し、その情報をディスクキューに預けます。 同じマシン上で 1 つの Web サーバーの複数のインスタンスを実行する場合、各インスタンスはコレクターモジュールの独自のインスタンスを読み込みます。ただし、コレクターのすべてのインスタンスは、イベントデータを同じディスクキューに書き込みます。

## ディスクキュー {#section-41aac77ab30e48478d1b31eac288df05}

ディスクキュー（キュー）は、Sensor が収集した生のイベントデータをバッファリングする、フォールトトレラントな FIFO（先入れ先出し）メモリマッピング済みのキューファイルで、収集したイベントデータを Web サーバーに一時的に保存します。

キューが制約なしに拡大しない（その結果、使用可能なすべてのディスク領域を消費する）ように、キューは固定サイズのファイルで維持されます。つまり、保持する容量と同じ量のイベントデータしか保持されません。 キューファイルのサイズは、Sensor がインストールされている場合に、Sensor 設定ファイルの QueueSize パラメーター (txlogd.conf) で設定します。 txlogd.conf パラメーターの詳細は、センサーの txlogd.conf ファイルのパラメーターを参照してください。

設定が完了すると、ファイルの物理的な長さは拡大または縮小されません。 コレクターは、新しいイベントデータをキューに入れ、トランスミッターはイベントを取り込みます。 コレクタがファイルの最後に到達すると、キューファイルへの書き込みが停止します。

一般に、トランスミッターは、コレクターがイベントをデポジットするのと同じ速さでキューからイベントを取り込みます。 ただし、トランスミッターと Insight サーバー間の接続が遅い、または使用できない場合、キューは未転送のイベントでいっぱいになる可能性があります。 この場合、トランスミッターがキューをダウンするまで、コレクターはデータの収集を停止します。 この間に Web サーバーが処理する要求に関する情報は永久に失われます。

**キューのサイズの決定**

Sensor をインストールする前に、キューの大きさを決定する必要があります。 永続的なデータ損失を防ぐには、Insight サーバーへの接続が最も停止した可能性が最も高い（つまり、ピークアクティビティの数日間にわたって十分なストレージ）期間に蓄積される可能性のあるイベント数に対応できる大きなキューを作成することが重要です。 システム管理者が対象の Insight サーバーにネットワークのアクセシビリティを復元したり、データを失うことなく Insight サーバーを修復または置き換えたりする時間を確保できるよう、このキューに十分なイベントデータを保持するように設定する必要があります。 センサーに障害が発生し、有効でアクセス可能なキューファイルにイベントデータが格納されていない場合、後続のデータは失われます。

>[!NOTE]
>
>Sensor を実行する各マシンの管理者が、ローカルキューファイルを削除、アーカイブ、または圧縮できる通常のログファイルとして扱わないように、ローカルキューファイルの固有の性質を理解することが重要です。

Adobeでは、Sensor がインストールされているサーバーで生成されるイベントデータを、最低 10 日 (10) 保持するようにキューを設定することをお勧めします。 つまり、昨年の任意のピーク日のイベントデータの量を取り、それを 10 倍にします。

この推奨事項は、次の点を前提としています。

* 貴社の IT チームは、本ガイドの Administering Sensor で詳しく説明されている方法で各センサを監視し、少なくとも 1 日に 1 回は監視しています。 そうでない場合は、この期間を適切に延長する必要があります。
* 貴社の IT チームは、ネットワークのアクセシビリティを復元したり、インストールされている Insight サーバーを 72 時間以内に置き換えたり、修復したりできます。 そうでない場合は、この期間を適切に延長する必要があります。
* センサーの設定は変わりません。
* 外部イベント（大規模なマーケティングキャンペーンなど）がない場合、Web サーバーによって生成されるイベントデータの量が大幅に増加します。

キューのサイズの選択は、応答時間や週末/祝日のシステム管理に関する企業の慣行や方針を考慮し、システム監視の希望レベルに大きく依存します。 キューのサイズが大きいほど、Adobeでは、キューをできるだけ大きくすることをお勧めします。

>[!NOTE]
>
>キューのファイルサイズが大きいと、パフォーマンスに影響を与えません。

キューのサイズ設定に関する詳細な推奨事項については、Adobeコンサルティングサービスにお問い合わせください。

## データトランスミッター {#section-2dc03d37d73b4cc6bdd5af6b346350d4}

トランスミッターは、Web サーバーと同じマシン上で実行される独立したプロセス（UNIX ベースのコンピューター上のデーモンや Windows コンピューター上のサービスなど）です。

トランスミッターは、ディスクキューからイベントデータを読み取り、圧縮し、指定した Insight サーバーに HTTP/S 経由で送信します。このサーバーで処理され、そこに保存されます。 **.vsl** ファイル。
